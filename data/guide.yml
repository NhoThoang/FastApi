HÃ m	CÃ´ng dá»¥ng	DÃ¹ng khi nÃ o?
add(obj)	ThÃªm má»™t object vÃ o session	Khi muá»‘n chÃ¨n dá»¯ liá»‡u má»›i nhÆ°ng chÆ°a commit ngay
add_all([obj1, obj2])	ThÃªm nhiá»u object vÃ o session	Khi cáº§n thÃªm nhiá»u dÃ²ng dá»¯ liá»‡u cÃ¹ng lÃºc
commit()	LÆ°u thay Ä‘á»•i vÃ o DB (khÃ´ng rollback Ä‘Æ°á»£c ná»¯a)	Khi muá»‘n lÆ°u thay Ä‘á»•i vÄ©nh viá»…n
flush()	Gá»­i dá»¯ liá»‡u xuá»‘ng DB nhÆ°ng chÆ°a commit	Khi cáº§n láº¥y ID tá»± Ä‘á»™ng sinh nhÆ°ng váº«n muá»‘n rollback náº¿u cáº§n
refresh(obj)	Cáº­p nháº­t dá»¯ liá»‡u tá»« DB vÃ o object	Khi muá»‘n cháº¯c cháº¯n dá»¯ liá»‡u trong object lÃ  má»›i nháº¥t tá»« DB
rollback()	Há»§y bá» táº¥t cáº£ thay Ä‘á»•i chÆ°a commit	Khi gáº·p lá»—i hoáº·c muá»‘n quay láº¡i tráº¡ng thÃ¡i trÆ°á»›c Ä‘Ã³
delete(obj)	ÄÃ¡nh dáº¥u object Ä‘á»ƒ xÃ³a khá»i DB	Khi cáº§n xÃ³a dá»¯ liá»‡u khá»i DB
close()	ÄÃ³ng session, giáº£i phÃ³ng tÃ i nguyÃªn	Khi hoÃ n thÃ nh cÃ´ng viá»‡c vá»›i session
execute(stmt)	Cháº¡y má»™t cÃ¢u SQL tÃ¹y chá»‰nh	Khi cáº§n cháº¡y cÃ¢u lá»‡nh SQL trá»±c tiáº¿p nhÆ° SELECT, UPDATE, DELETE
begin()	Má»Ÿ transaction thá»§ cÃ´ng	Khi cáº§n thá»±c hiá»‡n nhiá»u thao tÃ¡c vÃ  muá»‘n Ä‘áº£m báº£o táº¥t cáº£ cÃ¹ng thÃ nh cÃ´ng hoáº·c rollback náº¿u cÃ³ lá»—i


Äáº·c Ä‘iá»ƒm	InnoDB	MyISAM
Support Transaction	âœ… CÃ³ (ACID)	âŒ KhÃ´ng
Locking	Row-level (khÃ³a tá»«ng dÃ²ng)	Table-level (khÃ³a cáº£ báº£ng)
Cache System	Buffer Pool	Key Cache
Foreign Keys	âœ… Há»— trá»£	âŒ KhÃ´ng
Rollback	âœ… CÃ³	âŒ KhÃ´ng
Tá»‘c Ä‘á»™ INSERT/UPDATE	ğŸš€ Nhanh hÆ¡n vá»›i nhiá»u truy váº¥n Ä‘á»“ng thá»i	â³ Nhanh hÆ¡n khi chá»‰ cÃ³ INSERT Ä‘Æ¡n giáº£n


Dá»¯ liá»‡u má»›i Ä‘Æ°á»£c ghi vÃ o Buffer Pool (InnoDB) hoáº·c Key Cache (MyISAM).
Náº¿u cÃ³ AUTO_INCREMENT, giÃ¡ trá»‹ tÄƒng Ä‘Æ°á»£c quáº£n lÃ½ trong InnoDB Internal Cache.
Sau Ä‘Ã³, dá»¯ liá»‡u sáº½ flush xuá»‘ng disk (Redo Log + Data Files).
Náº¿u báº­t binlog, MySQL ghi log Ä‘á»ƒ Ä‘áº£m báº£o kháº£ nÄƒng khÃ´i phá»¥c dá»¯ liá»‡u.

Tá»‘i Æ°u INSERT: âœ… Sá»­ dá»¥ng INSERT ... VALUES (...), (...), (...) Ä‘á»ƒ chÃ¨n nhiá»u dÃ²ng cÃ¹ng lÃºc.
âœ… TÄƒng tá»‘c báº±ng cÃ¡ch táº¯t táº¡m thá»i FOREIGN KEY (SET FOREIGN_KEY_CHECKS=0) khi chÃ¨n sá»‘ lÆ°á»£ng lá»›n.
âœ… Sá»­ dá»¥ng LOAD DATA INFILE Ä‘á»ƒ nháº­p dá»¯ liá»‡u nhanh hÆ¡n

Tá»‘i Æ°u DELETE: âœ… DÃ¹ng TRUNCATE TABLE náº¿u muá»‘n xÃ³a toÃ n bá»™ dá»¯ liá»‡u (nhanh hÆ¡n DELETE).
âœ… Sá»­ dá»¥ng partitioning náº¿u báº£ng quÃ¡ lá»›n Ä‘á»ƒ trÃ¡nh áº£nh hÆ°á»Ÿng hiá»‡u suáº¥t toÃ n há»‡ thá»‘ng.
âœ… XÃ³a theo batch: DELETE FROM table WHERE condition LIMIT 1000 Ä‘á»ƒ trÃ¡nh lock báº£ng.

ğŸš€ 3. CÃ¡c loáº¡i Cache trong MySQL
MySQL cÃ³ nhiá»u cÆ¡ cháº¿ cache giÃºp tÄƒng tá»‘c Ä‘á»™ xá»­ lÃ½:

ğŸ”¹ 1. InnoDB Buffer Pool (Bá»™ nhá»› chÃ­nh cá»§a InnoDB)
ğŸ“Œ Chá»©a:
âœ… Dá»¯ liá»‡u (pages) tá»« báº£ng & index.
âœ… Redo Logs Ä‘á»ƒ lÆ°u thay Ä‘á»•i trÆ°á»›c khi ghi vÃ o disk.
ğŸ“Œ CÃ¡ch tá»‘i Æ°u:
âœ… TÄƒng innodb_buffer_pool_size Ä‘á»ƒ giá»¯ nhiá»u dá»¯ liá»‡u hÆ¡n trong RAM.
âœ… TÄƒng innodb_log_buffer_size Ä‘á»ƒ giáº£m ghi log Ä‘Ä©a.

ğŸ“Œ Chá»©a:
âœ… Káº¿t quáº£ truy váº¥n SQL Ä‘á»ƒ trÃ¡nh cháº¡y láº¡i query giá»‘ng nhau.
ğŸ“Œ CÃ¡ch tá»‘i Æ°u:
âœ… Náº¿u dÃ¹ng MySQL < 8, hÃ£y báº­t query_cache_size náº¿u dá»¯ liá»‡u Ã­t thay Ä‘á»•i.

ğŸ”¹ 3. Redo Log Cache (Chá»©a log cá»§a giao dá»‹ch trÆ°á»›c khi ghi vÃ o file)
ğŸ“Œ CÃ¡ch hoáº¡t Ä‘á»™ng:
âœ… Khi INSERT/UPDATE/DELETE, thay Ä‘á»•i Ä‘Æ°á»£c ghi vÃ o Redo Log Cache trÆ°á»›c.
âœ… Redo Log sau Ä‘Ã³ Ä‘Æ°á»£c flush xuá»‘ng disk Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng máº¥t dá»¯ liá»‡u.
ğŸ“Œ Tá»‘i Æ°u:
âœ… TÄƒng innodb_log_file_size Ä‘á»ƒ giáº£m sá»‘ láº§n ghi Ä‘Ä©a.

ğŸ”¹ 4. Undo Log Cache (LÆ°u dá»¯ liá»‡u cÅ© Ä‘á»ƒ há»— trá»£ rollback)
ğŸ“Œ Khi nÃ o dÃ¹ng?
âœ… Khi cÃ³ giao dá»‹ch (BEGIN TRANSACTION) vÃ  cáº§n rollback.
ğŸ“Œ Tá»‘i Æ°u:
âœ… TÄƒng innodb_undo_log_truncate Ä‘á»ƒ trÃ¡nh log chiáº¿m quÃ¡ nhiá»u dung lÆ°á»£ng.




oáº¡i Cache	Chá»©a gÃ¬?	Hoáº¡t Ä‘á»™ng khi nÃ o?	CÃ¡ch tá»‘i Æ°u
InnoDB Buffer Pool	Dá»¯ liá»‡u tá»« báº£ng, chá»‰ má»¥c (index), redo log	Khi SELECT, INSERT, UPDATE, DELETE	TÄƒng innodb_buffer_pool_size Ä‘á»ƒ giá»¯ nhiá»u dá»¯ liá»‡u hÆ¡n trong RAM
Query Cache (Ä‘Ã£ bá»‹ loáº¡i bá» tá»« MySQL 8)	Káº¿t quáº£ truy váº¥n SQL	Khi cÃ³ SELECT láº·p láº¡i	KhÃ´ng cÃ²n dÃ¹ng trong MySQL 8, thay báº±ng ProxySQL, Redis Cache
Redo Log Cache	Ghi nháº­n thay Ä‘á»•i trÆ°á»›c khi flush xuá»‘ng disk	Khi cÃ³ transaction (INSERT, UPDATE, DELETE)	TÄƒng innodb_log_buffer_size Ä‘á»ƒ giáº£m sá»‘ láº§n ghi Ä‘Ä©a
Undo Log Cache	Dá»¯ liá»‡u cÅ© Ä‘á»ƒ rollback	Khi cháº¡y ROLLBACK hoáº·c cÃ³ transaction chÆ°a commit	TÄƒng innodb_undo_log_truncate Ä‘á»ƒ trÃ¡nh log chiáº¿m quÃ¡ nhiá»u dung lÆ°á»£ng
Key Cache (MyISAM)	Chá»‰ má»¥c (index) cá»§a MyISAM	Khi SELECT trÃªn báº£ng MyISAM	TÄƒng key_buffer_size náº¿u dÃ¹ng MyISAM
Table Cache	Metadata cá»§a báº£ng Ä‘ang má»Ÿ	Khi má»Ÿ nhiá»u báº£ng cÃ¹ng lÃºc	TÄƒng table_open_cache náº¿u nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i
Thread Cache	Káº¿t ná»‘i cÅ© Ä‘á»ƒ trÃ¡nh táº¡o má»›i thread	Khi cÃ³ nhiá»u káº¿t ná»‘i láº·p láº¡i	TÄƒng thread_cache_size náº¿u há»‡ thá»‘ng cÃ³ nhiá»u káº¿t ná»‘i
Binary Log Cache	Log thay Ä‘á»•i cá»§a transaction (dÃ¹ng cho replication)	Khi cÃ³ replication	TÄƒng binlog_cache_size náº¿u há»‡ thá»‘ng replica lá»›n
Adaptive Hash Index (AHI)	Index cache Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ tÃ¬m kiáº¿m	Khi cÃ³ truy váº¥n sá»­ dá»¥ng index nhiá»u láº§n	Tá»± Ä‘á»™ng tá»‘i Æ°u, khÃ´ng cáº§n chá»‰nh thá»§ cÃ´ng
Result Set Cache (MySQL 8)	Káº¿t quáº£ truy váº¥n SQL Ä‘á»ƒ trÃ¡nh tÃ­nh toÃ¡n láº¡i	Khi cÃ³ SELECT trÃªn dá»¯ liá»‡u Ã­t thay Ä‘á»•i	Báº­t resultset_cache_size trong MySQL 8


ğŸ“Œ Ghi chÃº quan trá»ng
âœ… InnoDB Buffer Pool lÃ  quan trá»ng nháº¥t náº¿u dÃ¹ng InnoDB.
âœ… Query Cache Ä‘Ã£ bá»‹ loáº¡i bá» tá»« MySQL 8, nÃªn thay tháº¿ báº±ng Redis hoáº·c ProxySQL.
âœ… Redo Log Cache vÃ  Undo Log Cache giÃºp MySQL xá»­ lÃ½ transaction nhanh hÆ¡n.
âœ… Table Cache & Thread Cache giÃºp tÄƒng tá»‘c Ä‘á»™ má»Ÿ báº£ng vÃ  quáº£n lÃ½ káº¿t ná»‘i.



ğŸ— 1. Cáº¥u hÃ¬nh máº·c Ä‘á»‹nh cá»§a cÃ¡c loáº¡i cache trong MySQL
Cache	Máº·c Ä‘á»‹nh (MySQL 8.x)	Ghi chÃº
InnoDB Buffer Pool	128MB (innodb_buffer_pool_size)	TÄƒng Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t Ä‘á»c/ghi
Redo Log Cache	16MB (innodb_log_buffer_size)	Giáº£m ghi Ä‘Ä©a náº¿u giao dá»‹ch lá»›n
Undo Log Cache	16MB (innodb_undo_log_truncate)	Há»— trá»£ rollback
Table Cache	2000 (table_open_cache)	TÄƒng náº¿u nhiá»u báº£ng má»Ÿ cÃ¹ng lÃºc
Thread Cache	9 (thread_cache_size)	TÄƒng náº¿u cÃ³ nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i
Binary Log Cache	32KB (binlog_cache_size)	DÃ¹ng khi cÃ³ replication
Result Set Cache (MySQL 8.x)	0 (resultset_cache_size)	Máº·c Ä‘á»‹nh táº¯t, cÃ³ thá»ƒ báº­t




ğŸ“‚ 2. CÃ¡ch Ä‘á»c file trong MySQL theo page size (4KB, 8KB, 16KB, 64KB)
MySQL dÃ¹ng InnoDB Buffer Pool Ä‘á»ƒ Ä‘á»c file thÃ nh tá»«ng trang (page).
KÃ­ch thÆ°á»›c máº·c Ä‘á»‹nh cá»§a page InnoDB lÃ  16KB, nhÆ°ng cÃ³ thá»ƒ Ä‘á»•i thÃ nh 4KB, 8KB, 32KB, 64KB.
ğŸ“Œ Lá»‡nh kiá»ƒm tra page size hiá»‡n táº¡i:

sql
Copy
Edit
SELECT variable_value FROM information_schema.global_variables 
WHERE variable_name = 'innodb_page_size';


ğŸ“Œ Táº¡o tablespace vá»›i kÃ­ch thÆ°á»›c page khÃ¡c (chá»‰ khi khá»Ÿi táº¡o database):

sql
Copy
Edit
CREATE TABLESPACE my_space 
ADD DATAFILE 'my_space.ibd' 
FILE_BLOCK_SIZE = 8K;



âš™ï¸ 3. Cáº¥u hÃ¬nh thay Ä‘á»•i size cá»§a cÃ¡c loáº¡i cache
CÃ¡c giÃ¡ trá»‹ nÃ y Ä‘Æ°á»£c thay Ä‘á»•i trong MySQL config file (my.cnf hoáº·c my.ini) hoáº·c báº±ng SQL trá»±c tiáº¿p.

ğŸ”¥ Thay Ä‘á»•i báº±ng SQL (táº¡m thá»i, khÃ´ng lÆ°u khi restart)
sql
Copy
Edit
SET GLOBAL innodb_buffer_pool_size = 1 * 1024 * 1024 * 1024;  -- 1GB
SET GLOBAL innodb_log_buffer_size = 64 * 1024 * 1024;         -- 64MB
SET GLOBAL table_open_cache = 5000;                           -- 5000 table cache
SET GLOBAL thread_cache_size = 20;                            -- 20 threads
SET GLOBAL binlog_cache_size = 128 * 1024;                    -- 128KB
SET GLOBAL resultset_cache_size = 64 * 1024 * 1024;           -- 64MB



ğŸ”§ Thay Ä‘á»•i trong my.cnf (lÆ°u vÄ©nh viá»…n)
Má»Ÿ file /etc/mysql/my.cnf hoáº·c C:\ProgramData\MySQL\MySQL Server 8.0\my.ini vÃ  thÃªm:

ini
Copy
Edit
[mysqld]
innodb_buffer_pool_size = 1G
innodb_log_buffer_size = 64M
table_open_cache = 5000
thread_cache_size = 20
binlog_cache_size = 128K
resultset_cache_size = 64M


Sau Ä‘Ã³ restart MySQL:

bash
Copy
Edit
systemctl restart mysql   TrÃªn Linux
net stop mysql && net start mysql   TrÃªn Windows



ğŸ“Œ LÆ°u Ã½ quan trá»ng khi tá»‘i Æ°u cache
âœ… InnoDB Buffer Pool nÃªn chiáº¿m 50-80% RAM náº¿u database lá»›n.
âœ… Redo Log Cache nÃªn tÄƒng náº¿u cÃ³ giao dá»‹ch lá»›n Ä‘á»ƒ giáº£m ghi Ä‘Ä©a.
âœ… Binary Log Cache nÃªn tá»‘i Æ°u náº¿u cÃ³ replication.
âœ… Page Size thÆ°á»ng lÃ  16KB vÃ  khÃ´ng thá»ƒ thay Ä‘á»•i sau khi táº¡o database.

tÃ­nh toÃ¡n Ä‘á»ƒ 
innodb_buffer_pool_size â‰ˆ (Total RAM * 0.5 Ä‘áº¿n 0.8) - (dung lÆ°á»£ng cÃ¡c process khÃ¡c)
Server cÃ³ 16GB RAM.
Cháº¡y MySQL + Web Server + Cache khÃ¡c (Redis, Kafka, v.v.).
Web Server chiáº¿m khoáº£ng 4GB, Redis/Kafka chiáº¿m 2GB.
Tá»‘i Æ°u innodb_buffer_pool_size = (16GB - 6GB) * 0.8 â‰ˆ 8GB.
SHOW ENGINE INNODB STATUS \G;
SELECT variable_value FROM information_schema.global_variables 
WHERE variable_name = 'innodb_buffer_pool_size';
[mysqld]
innodb_buffer_pool_size = 8G
innodb_buffer_pool_instances = 8    Chia nhá» buffer pool náº¿u lá»›n hÆ¡n 1GB
(B) TÃ­nh toÃ¡n innodb_log_buffer_size
innodb_log_buffer_size â‰ˆ (50% Ä‘áº¿n 100% kÃ­ch thÆ°á»›c giao dá»‹ch lá»›n nháº¥t)
SHOW GLOBAL STATUS LIKE 'Innodb_os_log_written';
[mysqld]
innodb_log_buffer_size = 128M
(C) TÃ­nh toÃ¡n table_open_cache
table_open_cache = (Total Tables * Active Connections) / 2
VÃ­ dá»¥:
Náº¿u MySQL cÃ³ 5000 báº£ng, 100 káº¿t ná»‘i Ä‘á»“ng thá»i â†’ Ä‘áº·t table_open_cache â‰ˆ 2500.
SHOW STATUS LIKE 'Open_tables';
SHOW VARIABLES LIKE 'table_open_cache';
[mysqld]
table_open_cache = 2500

 (D) TÃ­nh toÃ¡n binlog_cache_size (náº¿u dÃ¹ng replication)
 binlog_cache_size = (Tá»•ng sá»‘ transactions concurrent * Trung bÃ¬nh má»—i transaction)
VÃ­ dá»¥:
Náº¿u cÃ³ 100 transactions/s vá»›i má»—i transaction trung bÃ¬nh 512KB â†’ Ä‘áº·t binlog_cache_size = 50MB.
SHOW GLOBAL STATUS LIKE 'Binlog_cache_use';
[mysqld]
binlog_cache_size = 50M

âœ… (A) Theo dÃµi lÆ°á»£ng bá»™ nhá»› MySQL Ä‘ang dÃ¹ng
Cháº¡y lá»‡nh kiá»ƒm tra bá»™ nhá»› RAM MySQL Ä‘ang sá»­ dá»¥ng:

sql
Copy
Edit
SHOW ENGINE INNODB STATUS \G;
SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_pages_free';
SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_read_requests';

mysql -e "SELECT @@innodb_buffer_pool_size;"

âœ… (B) Báº­t Performance Schema Ä‘á»ƒ giÃ¡m sÃ¡t cache
Báº­t Performance Schema Ä‘á»ƒ kiá»ƒm tra cache cÃ³ bá»‹ trÃ n khÃ´ng:

sql
Copy
Edit
SELECT * FROM performance_schema.memory_summary_global_by_event_name;


ğŸ”¥ TÃ³m láº¡i â€“ CÃ¡ch trÃ¡nh trÃ n cache hiá»‡u quáº£
âœ… Æ¯u tiÃªn RAM cho innodb_buffer_pool_size (50-80% tá»•ng RAM)
âœ… Giá»¯ log trong RAM (innodb_log_buffer_size) Ä‘á»ƒ giáº£m ghi disk
âœ… Háº¡n cháº¿ Ä‘á»c disk quÃ¡ nhiá»u báº±ng cÃ¡ch tá»‘i Æ°u table_open_cache
âœ… Náº¿u dÃ¹ng replication, tÄƒng binlog_cache_size
âœ… LuÃ´n giÃ¡m sÃ¡t báº±ng SHOW ENGINE INNODB STATUS & Performance Schema

Cáº¥u hÃ¬nh nÃ y sáº½ giÃºp MySQL cháº¡y mÆ°á»£t hÆ¡n, Ã­t ghi disk hÆ¡n vÃ  trÃ¡nh cache bá»‹ trÃ n ğŸš€.

SET GLOBAL innodb_buffer_pool_size = 8G;
SET GLOBAL innodb_log_buffer_size = 128M;
SET GLOBAL binlog_cache_size = 16M;


âœ… innodb_log_buffer_size Ä‘Æ°á»£c giáº£i phÃ³ng khi:

Transaction COMMIT â†’ Log buffer Ä‘Æ°á»£c flush xuá»‘ng disk.
Log buffer gáº§n Ä‘áº§y â†’ MySQL tá»± Ä‘á»™ng flush trÆ°á»›c khi Ä‘áº§y.
Má»—i giÃ¢y náº¿u innodb_flush_log_at_trx_commit = 0/2 â†’ MySQL flush tá»± Ä‘á»™ng.
Log file bá»‹ Ä‘áº§y (checkpointing) â†’ MySQL báº¯t buá»™c flush log buffer Ä‘á»ƒ trÃ¡nh ngháº½n.


SHOW GLOBAL STATUS LIKE 'innodb_log_waits';
innodb_log_waits > 0, nghÄ©a lÃ  MySQL pháº£i chá» ghi log xuá»‘ng disk do
SHOW GLOBAL STATUS LIKE 'innodb_log_waits';


SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_read%';
 Ã nghÄ©a cÃ¡c giÃ¡ trá»‹:

Innodb_buffer_pool_read_requests = Sá»‘ láº§n MySQL Ä‘á»c tá»« cache.
Innodb_buffer_pool_reads = Sá»‘ láº§n MySQL pháº£i Ä‘á»c tá»« disk.


TÃ­nh tá»· lá»‡ cache hit:
SELECT (1 - (Innodb_buffer_pool_reads / Innodb_buffer_pool_read_requests)) * 100 AS cache_hit_rate
FROM (SELECT VARIABLE_VALUE AS Innodb_buffer_pool_reads 
      FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_reads') AS A,
     (SELECT VARIABLE_VALUE AS Innodb_buffer_pool_read_requests
      FROM performance_schema.global_status WHERE VARIABLE_NAME = 'Innodb_buffer_pool_read_requests') AS B;
Náº¿u cache hit < 90% â†’ Buffer Pool quÃ¡ nhá», cáº§n tÄƒng!
SET GLOBAL innodb_buffer_pool_size = 16G;

 Kiá»ƒm tra binlog_cache_size cÃ³ bá»‹ Ä‘áº§y khÃ´ng (Ä‘á»‘i vá»›i replication)?
 SHOW GLOBAL STATUS LIKE 'Binlog_cache_disk_use';
 Náº¿u Binlog_cache_disk_use > 0, nghÄ©a lÃ  binlog_cache_size khÃ´ng Ä‘á»§, MySQL pháº£i ghi ra file táº¡m trÃªn disk
 SET GLOBAL binlog_cache_size = 32M;

Kiá»ƒm tra xem cÃ³ transaction nÃ o pháº£i flush xuá»‘ng disk do thiáº¿u cache khÃ´ng?
SHOW GLOBAL STATUS LIKE 'innodb_log_fsyncs';

Náº¿u sá»‘ nÃ y cao, nghÄ©a lÃ  quÃ¡ nhiá»u transaction Ä‘ang ghi log xuá»‘ng disk thay vÃ¬ RAM.
ğŸ›  Giáº£i phÃ¡p:

TÄƒng innodb_log_buffer_size náº¿u transaction quÃ¡ lá»›n.
Kiá»ƒm tra láº¡i báº±ng SHOW GLOBAL STATUS LIKE 'innodb_log_fsyncs';

âœ… Kiá»ƒm tra log buffer Ä‘áº§y â†’ SHOW GLOBAL STATUS LIKE 'innodb_log_waits';
âœ… Kiá»ƒm tra cache hit cá»§a Buffer Pool â†’ SHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_read%';
âœ… Kiá»ƒm tra binlog cache cÃ³ bá»‹ Ä‘áº§y khÃ´ng â†’ SHOW GLOBAL STATUS LIKE 'Binlog_cache_disk_use';
âœ… Kiá»ƒm tra sá»‘ láº§n transaction flush xuá»‘ng disk â†’ SHOW GLOBAL STATUS LIKE 'innodb_log_fsyncs';

ğŸ“Œ Náº¿u tháº¥y cache quÃ¡ táº£i, cáº§n tÄƒng kÃ­ch thÆ°á»›c bá»™ nhá»› Ä‘á»ƒ trÃ¡nh Ä‘á»c/ghi xuá»‘ng disk gÃ¢y cháº­m! ğŸš€














